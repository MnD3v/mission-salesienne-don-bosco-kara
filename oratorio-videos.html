<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Vidéos – Paroisse Don Bosco Kara</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: #888379; }
    header { background-image: url('IMAGE/img en tete.jpg'); color: #221d6e;background-color: #444; padding: 2rem 1rem 1rem 1rem; text-align: center; }
    header img { height: 70px; margin-bottom: 0.5rem; display: block; margin-left: auto; margin-right: auto; }
    nav { background: #003f6b; padding: 1rem; text-align: center; }
    nav a { color: #fff; margin: 0 1rem; text-decoration: none; font-weight: bold; transition: color 0.2s; }
    nav a:hover, nav a.active { color: #ffd700; }
    .container { max-width: 1100px; margin: 2rem auto; background: #fff; padding: 2.5rem 2rem; border-radius: 12px; box-shadow: 0 2px 16px rgba(0,0,0,0.08);}
    h2 { color: #005baa; margin-top: 0; }
    .video-grid { display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center; }
    .video-item { background: #f1f6fa; border-radius: 10px; box-shadow: 0 1px 6px rgba(0,91,170,0.06); padding: 1rem; width: 340px; max-width: 98vw; text-align: center; }
    .video-item iframe, .video-item video { width: 100%; height: 200px; border-radius: 8px; margin-bottom: 0.7rem; }
    .video-item .caption { color: #444; font-size: 1.02rem; margin-bottom: 0.5rem; }
    .add-video { margin: 2rem 0 0 0; text-align: center; }
    .add-video input[type="text"] { width: 60%; padding: 0.5rem; border-radius: 6px; border: 1px solid #bbb; margin-bottom: 0.7rem; }
    .add-video button { background: #0072ce; color: #fff; border: none; border-radius: 6px; padding: 0.6rem 1.5rem; font-weight: 600; cursor: pointer; transition: background 0.2s; }
    .add-video button:hover { background: #005baa; }
    #video-table-container { margin:2.5rem 0; }
    table { width:100%; border-collapse:collapse; text-align:left; }
    th, td { padding:8px; border:1px solid #ccc; }
    th { background:#f1f6fa; }
    .delete-btn { background:#d32f2f; color:#fff; border:none; border-radius:5px; padding:0.3rem 1rem; cursor:pointer; }
    @media (max-width: 900px) {
      .video-grid { gap: 1rem; }
      .video-item { width: 98%; max-width: 350px; }
      .container { padding: 1.2rem; }
    }
     footer { background: #003f6b; color: #fff; text-align: center; padding: 2rem 1rem 1rem 1rem; margin-top: 2rem; border-radius: 0 0 10px 10px;}
    .footer-social { margin: 1rem 0; }
    .footer-social a { display: inline-block; margin: 0 0.5rem; }
    .footer-social img { width: 32px; height: 32px; vertical-align: middle; }
    .footer-contact { margin-top: 1rem; font-size: 1.05rem; }
    @media (max-width: 900px) {
      .parish-hero { flex-direction: column; }
      .container { padding: 1.2rem; }
    }
  </style>
</head>
<header style="background: #fff; padding: 1.5rem 0 0 0; border-bottom: 8px solid #b71c1c;">
  <div style="display: flex; align-items: center; justify-content: center; max-width: 1200px; margin: 15px auto;">
    <img src="logo/logo.png" alt="Logo Mission Salésienne Don Bosco Kara" style="height: 80px;">
  </div>
  <div style="width:100%;overflow:hidden;margin-top:0;">
    <img src="IMAGE/img%20en%20tete.jpg" alt="Bannière Don Bosco Kara" style="width:100%;display:block;object-fit:cover;max-height:220px;">
  </div>
  <nav>
  <a href="index.html">Accueil</a>
  <a href="ONG.html">ONG</a>
  <a href="paroisse.html">Paroisse</a>
  <a href="centre-formation.html">Centre de Formation</a>
  <a href="college-lycee.html">Collège & Lycée</a>
  <div class="dropdown">
    <a href="#" class="dropbtn">Foyer ▼</a>
    <div class="dropdown-content">
      <a href="foyer-immaculee.html">Foyer Immaculée</a>
      <a href="foyer-jean-paul-ii.html">Foyer Jean Paul II</a>
    </div>
  </div>
  <a href="oratorio.html">Oratorio</a>
  <a href="pastorale.html">Pastorale</a>
  <a href="actualité.html">Actualités</a>
  <a href="autres.html">Autres</a>
</nav>
</header>
<body>
  
<style>
  nav {
    position: relative;
    z-index: 10;
  }
  .dropdown {
    display: inline-block;
    position: relative;
  }
  .dropbtn {
    color: #fff;
    background: none;
    border: none;
    font-weight: bold;
    font-size: 1rem;
    cursor: pointer;
    text-decoration: none;
    padding: 0;
    margin: 0 1rem;
  }
  .dropdown-content {
    display: none;
    position: absolute;
    background: #005baa;
    min-width: 180px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.10);
    border-radius: 0 0 8px 8px;
    top: 100%;
    left: 0;
    z-index: 100;
  }
  .dropdown-content a {
    color: #fff;
    padding: 1rem 1.2rem;
    text-decoration: none;
    display: block;
    font-weight: normal;
    border-bottom: 1px solid #0072ce;
    transition: background 0.2s;
  }
  .dropdown-content a:last-child {
    border-bottom: none;
  }
  .dropdown-content a:hover {
    background: #0072ce;
    color: #ffd700;
  }
  .dropdown:hover .dropdown-content,
  .dropdown:focus-within .dropdown-content {
    display: block;
  }
  /* Pour garder l'alignement des liens */
  nav > a, nav > .dropdown {
    vertical-align: middle;
  }
</style>
  <div class="container">
    <h2>Galerie Vidéos</h2>
    <div class="video-grid" id="video-gallery">
      <!-- Les vidéos s'affichent ici -->
       <video src="paroisseplus/WhatsApp Vidéo 2025-06-17 à 18.26.47_f93f3967.mp4"></video>
       <video src="paroisseplus/WhatsApp Vidéo 2025-06-17 à 18.26.52_b3458967.mp4"></video>
       
      <div class="video-item">
        <video controls poster=PAROISSE/video/WhatsApp Vidéo 2025-06-17 à 18.26.45_e6edfaa1.mp4"" style="width:100%;height:200px;object-fit:cover;border-radius:8px;">
          <source src="PAROISSE/video/WhatsApp Vidéo 2025-06-17 à 18.26.45_e6edfaa1.mp4" type="video/mp4">
       <video src="paroisseplus/WhatsApp Vidéo 2025-06-17 à 18.26.52_b3458967.mp4"></video>
           
        </video>
        <div class="caption">Vidéo locale</div>
      </div>
      <!-- Fin vidéo locale -->
    </div>
    <div id="video-table-container"></div>
    <div class="add-video">
      <h3>Ajouter une vidéo</h3>
      <input type="text" id="videoUrl" placeholder="Collez ici le lien de la vidéo (YouTube, Vimeo, ou mp4)">
      <input type="text" id="videoCaption" placeholder="Légende (facultatif)">
      <br>
      <button onclick="addVideo()">Ajouter</button>
    </div>
  </div>
 <footer>
    <div class="footer-social">
    <a href="https://www.facebook.com/Paroisse.JBK/" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook"></a>
       <a href="https://wa.me/70239862" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/733/733585.png" alt="WhatsApp"></a>
      <a href="https://www.tiktok.com/@paroisse.saint.je4?_t=ZM-8xU39hlMXK9&_r=1" target="_blank">
        <img src="https://cdn-icons-png.flaticon.com/512/3046/3046121.png" alt="TikTok" width="32" height="32">
      </a>
    </div>      
    <div class="footer-contact">
      <strong>Adresse :</strong> Quartier Don Bosco, Kara, Togo<br>
      <strong>Téléphone :</strong> +228 70239862<br>
      <strong>Email :</strong> dt.kara.donbosco.aos@gmail.com
    </div>
    <div style="margin-top:1rem;">
      &copy; 2025 Paroisse Don Bosco Kara. Tous droits réservés.
    </div>
  </footer>
  <script>
    const AUTHORIZED_PASSWORD = "donbosco2025";
    let isAuthorized = false;

    function showAddVideoForm() {
      document.querySelector('.add-video').style.display = 'block';
      renderVideoGallery();
    }

    function hideAddVideoForm() {
      document.querySelector('.add-video').style.display = 'none';
      renderVideoGallery();
    }

    function askPassword() {
      const pwd = prompt("Veuillez entrer le mot de passe pour ajouter/supprimer des vidéos :");
      if (pwd === AUTHORIZED_PASSWORD) {
        isAuthorized = true;
        showAddVideoForm();
      } else {
        isAuthorized = false;
        hideAddVideoForm();
        alert("Accès refusé.");
      }
    }
    const defaultVideos = [
  { url: "paroisseplus/WhatsApp Vidéo 2025-06-17 à 18.26.47_f93f3967.mp4", caption: "Vidéo locale 1" },
  { url: "paroisseplus/WhatsApp Vidéo 2025-06-17 à 18.26.52_b3458967.mp4", caption: "Vidéo locale 2" },
  { url: "PAROISSE/video/WhatsApp Vidéo 2025-06-17 à 18.26.45_e6edfaa1.mp4", caption: "Vidéo locale 3" }
];

    function saveVideosToStorage(videos) {
      localStorage.setItem('Oratorio_gallery_videos', JSON.stringify(videos));
    }

   
function loadVideosFromStorage() {
  const data = localStorage.getItem('Oratorio_gallery_videos');
  if (data) {
    try {
      return JSON.parse(data);
    } catch {
      return [];
    }
  }
  // Si aucune vidéo n'est en localStorage, on initialise avec les vidéos par défaut
  saveVideosToStorage(defaultVideos);
  return [...defaultVideos];
}
    function renderVideoGallery() {
      const gallery = document.getElementById('video-gallery');
      gallery.innerHTML = '';
      const videos = loadVideosFromStorage();
      videos.forEach((vid, idx) => {
        const div = document.createElement('div');
        div.className = 'video-item';
        div.innerHTML = `
          ${getVideoEmbed(vid.url)}
          <div class="caption">${vid.caption || ''}</div>
          ${isAuthorized ? `<button class="delete-btn" onclick="deleteVideo(${idx})">Supprimer</button>` : ''}
        `;
        gallery.appendChild(div);
      });
      renderVideoTable();
    }

     function getVideoEmbed(url) {
    // YouTube
    const yt = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/);
    if (yt) {
      // Affiche la miniature YouTube cliquable
      return `<a href="${url}" target="_blank" style="display:inline-block;">
        <img src="https://img.youtube.com/vi/${yt[1]}/hqdefault.jpg" alt="Miniature vidéo" style="width:100%;height:200px;object-fit:cover;border-radius:8px;">
      </a>`;
    }
    // Vimeo
    const vimeo = url.match(/vimeo\.com\/(\d+)/);
    if (vimeo) {
      // Utilise la vignette Vimeo via un service tiers (pas d'API officielle sans accès)
      const vimeoId = vimeo[1];
      const thumbUrl = `https://vumbnail.com/${vimeoId}.jpg`;
      return `<a href="${url}" target="_blank" style="display:inline-block;">
        <img src="${thumbUrl}" alt="Miniature vidéo" style="width:100%;height:200px;object-fit:cover;border-radius:8px;">
      </a>`;
    }
    // MP4 direct link
    if (url.endsWith('.mp4')) {
      // Affiche une icône vidéo générique
      return `<a href="${url}" target="_blank" style="display:inline-block;">
        <img src="https://cdn-icons-png.flaticon.com/512/727/727245.png" alt="Vidéo" style="width:50%;height:100px;object-fit:contain;background:#eee;border-radius:8px;">
      </a>`;
    }
    // Autre
    return `<a href="${url}" target="_blank" style="display:inline-block;">
      <img src="https://cdn-icons-png.flaticon.com/512/727/727245.png" alt="Vidéo" style="width:50%;height:100px;object-fit:contain;background:#eee;border-radius:8px;">
    </a>`;
  }

    function renderVideoTable() {
      const videos = loadVideosFromStorage();
      const container = document.getElementById('video-table-container');
      if (!isAuthorized || videos.length === 0) {
        container.innerHTML = '';
        return;
      }
      let html = `<table>
        <thead>
          <tr>
            <th>Vidéo</th>
            <th>Lien</th>
            <th>Légende</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>`;
      videos.forEach((vid, idx) => {
        html += `<tr>
          <td>${getVideoEmbed(vid.url)}</td>
          <td style="word-break:break-all;">${vid.url}</td>
          <td>${vid.caption || ''}</td>
          <td>
            <button class="delete-btn" onclick="deleteVideo(${idx})">Supprimer</button>
          </td>
        </tr>`;
      });
      html += `</tbody></table>`;
      container.innerHTML = html;
    }

    function addVideo() {
      if (!isAuthorized) {
        alert("Vous n'êtes pas autorisé à ajouter des vidéos.");
        return;
      }
      const url = document.getElementById('videoUrl').value.trim();
      const caption = document.getElementById('videoCaption').value.trim();
      if (!url) return alert("Veuillez entrer le lien de la vidéo.");
      const videos = loadVideosFromStorage();
      videos.push({ url, caption });
      saveVideosToStorage(videos);
      renderVideoGallery();
      document.getElementById('videoUrl').value = '';
      document.getElementById('videoCaption').value = '';
    }

    function deleteVideo(idx) {
      if (!isAuthorized) {
        alert("Vous n'êtes pas autorisé à supprimer des vidéos.");
        return;
      }
      if (!confirm("Voulez-vous vraiment supprimer cette vidéo ?")) return;
      const videos = loadVideosFromStorage();
      videos.splice(idx, 1);
      saveVideosToStorage(videos);
      renderVideoGallery();
    }

    window.addEventListener('DOMContentLoaded', function() {
       if (!localStorage.getItem('paroisse_gallery_videos')) {
    saveVideosToStorage(defaultVideos);
  }
      renderVideoGallery();
      hideAddVideoForm();
      // Affiche un bouton pour demander l'accès
      const btn = document.createElement('button');
      btn.textContent = "Ajouter ou supprimer une vidéo (Accès réservé)";
      btn.style = "margin:2rem auto;display:block;background:#0072ce;color:#fff;border:none;border-radius:6px;padding:0.7rem 2rem;font-weight:600;cursor:pointer;";
      btn.onclick = askPassword;
      document.querySelector('.add-video').parentNode.insertBefore(btn, document.querySelector('.add-video'));
    });
  </script>
  <script src="java.js"></script>
</body>
</html>